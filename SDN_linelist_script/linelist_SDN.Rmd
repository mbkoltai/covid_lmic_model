---
title: "Descriptive analysis of COVID-19 cases in Sudan"
author: "Fabienne Krauer, LSHTM CMMID"
date: "2020-12-07"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning=F)
load("ws_2020-12-07.RData")
library(ggplot2)
library(grid)
library(gridExtra)
theme_set(theme_minimal())
```


## Testing and positivity rates

Total number of tests (left) and tests per capita (per 100,000 population, right) conducted by state as of `r update` (includes pending results)

```{r echo=F, fig.width=16}
grid.arrange(fig1a, fig1b, ncol=2)
```

```{r echo=F}
knitr::kable(test_total[,c(1:2,10)])
```

Percentage of different testing groups among all tested
```{r echo=F}
knitr::kable(group)
```

Monthly positivity rate by state (note that some states and some time points have very few cases and the positivity rate can therefore change substantially with only few more cases)
```{r echo=F, fig.width=16, fig.height=10}
fig2
```


## Disease activity

Cumulative number of cases total (left) and per capita (per 100,000 population, right) by state as of `r update`.
```{r echo=FALSE, fig.width=16}
grid.arrange(fig3a, fig3b, ncol=2)
```

```{r echo=FALSE}
knitr::kable(cumulinc[,c(1:2,6)])
```

Weekly incident cases and deaths by state as of `r update` (defined by date of sampling and date of death)

```{r echo=FALSE, fig.width=15}
grid.arrange(fig4a, fig4b, ncol=2)
```

```{r echo=FALSE, fig.width=15}
grid.arrange(fig4c, fig4d, ncol=2)
```

```{r echo=FALSE, fig.width=15, fig.height=20}
fig5
```

Age-specific attack rates

```{r echo=F}
fig6
```

Delay between onset of symptoms and sampling (days)
```{r echo=F}
summary(data$t_onset_sample[data$result=="positive" & data$group=="suspected case"])
```

Delay between onset of symptoms and hospitalisation (days)
```{r echo=F}
summary(data$t_onset_hosp[data$result=="positive" & data$group=="suspected case"])
```

Delay between onset of symptoms and reporting (days)
```{r echo=F}
summary(data$t_onset_rep[data$result=="positive" & data$group=="suspected case"])
```

## Clinical characteristics

Age distribution of cases

```{r echo=FALSE, fig.width=5, message=F}
fig7
```

Case fatality ratio by age group (top left), month (top right), state (bottom left) and gender (bottom right)

```{r echo=FALSE, fig.width=15}
grid.arrange(fig8a, fig8b, ncol=2)
grid.arrange(fig8c, fig8d, ncol=2)
```


Proportion males by age group

```{r echo=FALSE, fig.width=7}
fig9
```


Reported symptoms by age group

```{r echo=FALSE, fig.width=15}
grid.arrange(fig10a, fig10b, ncol=2)
grid.arrange(fig10c, fig10d, ncol=2)
grid.arrange(fig10e, fig10f, ncol=2)
fig10g
```

